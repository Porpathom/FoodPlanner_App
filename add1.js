const admin = require('firebase-admin');
const serviceAccount = require('./demoapp-ffc17-firebase-adminsdk-fbsvc-e08543c7bd.json');

// เริ่มต้นการเชื่อมต่อกับ Firebase
admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  projectId: 'demoapp-ffc17',
  storageBucket: 'demoapp-ffc17.appspot.com'
});

const db = admin.firestore();

// ข้อมูลเมนูอาหารสำหรับผู้ป่วยโรคหัวใจ
const heartDiseaseMenus = {
  breakfast : [
    {
      name: "โจ๊กข้าวกล้องอกไก่",
      description: "ข้าวกล้องช่วยลดคอเลสเตอรอล อกไก่ให้โปรตีนดี ไขมันต่ำ",
      imageUrl: "https://i.postimg.cc/sfbXKWGv/image.png",
      ingredients: [
        "ข้าวกล้องหุงสุก ½ ถ้วย", 
        "อกไก่ต้มฉีก 50 กรัม", 
        "ขิงซอย 1 ช้อนชา", 
        "ต้นหอมซอย 1 ช้อนโต๊ะ", 
        "น้ำซุปผัก 1 ถ้วย", 
        "ซีอิ๊วขาวโซเดียมต่ำ ½ ช้อนชา"
      ],
      instructions: [
        "นำข้าวกล้องที่หุงสุกมาต้มกับน้ำซุปผักจนข้น",
        "ใส่อกไก่ฉีกลงไป ปรุงรสด้วยซีอิ๊วขาวโซเดียมต่ำ",
        "ต้มต่อให้เข้ากัน ตักใส่ชาม โรยขิงซอยและต้นหอม พร้อมเสิร์ฟ"
      ],
    },
    {
      name: "สลัดปลาทูน่าโยเกิร์ต",
      description: "ปลาทูน่ามีโอเมก้า 3 ดีต่อหัวใจ โยเกิร์ตช่วยลดไขมันในเส้นเลือด",
      imageUrl: "https://i.postimg.cc/C1XFPy1W/image.png",
      ingredients: [
        "ปลาทูน่าในน้ำแร่ 50 กรัม", 
        "ผักสลัด 1 ถ้วย", 
        "มะเขือเทศราชินี 3 ลูก", 
        "แตงกวาหั่น ½ ถ้วย", 
        "น้ำสลัดโยเกิร์ต (โยเกิร์ตรสธรรมชาติ 2 ช้อนโต๊ะ + น้ำมะนาว 1 ช้อนชา)"
      ],
      instructions: [
        "วางผักสลัด มะเขือเทศ และแตงกวาในจาน",
        "วางปลาทูน่าด้านบน",
        "ราดน้ำสลัดโยเกิร์ต พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "สมูทตี้เบอร์รี่โยเกิร์ต",
      description: "เบอร์รี่มีสารต้านอนุมูลอิสระ ช่วยลดความเสี่ยงโรคหัวใจ",
      imageUrl: "https://i.postimg.cc/FFkFfKCm/image.png",
      ingredients: [
        "บลูเบอร์รี่ ½ ถ้วย", 
        "สตรอว์เบอร์รี่ ½ ถ้วย", 
        "โยเกิร์ตรสธรรมชาติ ½ ถ้วย", 
        "น้ำผึ้ง 1 ช้อนชา (ไม่ใส่ก็ได้)"
      ],
      instructions: [
        "ใส่เบอร์รี่และโยเกิร์ตลงในเครื่องปั่น",
        "ปั่นจนเนียน เทใส่แก้ว",
        "ราดน้ำผึ้งเล็กน้อย พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ข้าวโอ๊ตต้มกล้วยน้ำว้า",
      description: "ข้าวโอ๊ตช่วยลดคอเลสเตอรอล กล้วยน้ำว้าให้พลังงานดีต่อหัวใจ",
      imageUrl: "https://i.postimg.cc/rwmPmDgN/image.png",
      ingredients: [
        "ข้าวโอ๊ต ½ ถ้วย", 
        "กล้วยน้ำว้าหั่น 1 ลูก", 
        "นมอัลมอนด์ ½ ถ้วย", 
        "อัลมอนด์สไลซ์ 1 ช้อนชา"
      ],
      instructions: [
        "ต้มข้าวโอ๊ตกับนมอัลมอนด์จนข้น",
        "ใส่กล้วยน้ำว้า คนให้เข้ากัน",
        "โรยอัลมอนด์สไลซ์ พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ไข่ตุ๋นนมถั่วเหลือง",
      description: "ไข่ตุ๋นให้โปรตีน นมถั่วเหลืองช่วยลดคอเลสเตอรอล",
      imageUrl: "https://i.postimg.cc/FzpTFvL6/image.png",
      ingredients: [
        "ไข่ไก่ 1 ฟอง", 
        "นมถั่วเหลือง ½ ถ้วย", 
        "แครอทหั่นเต๋า 1 ช้อนโต๊ะ", 
        "ต้นหอมซอย 1 ช้อนโต๊ะ"
      ],
      instructions: [
        "ตีไข่ให้เข้ากับนมถั่วเหลือง กรองให้เนียน",
        "ใส่แครอท นึ่ง 15 นาทีจนสุก",
        "โรยต้นหอม พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ข้าวต้มข้าวกล้องเห็ดหอม",
      description: "เห็ดหอมมีสารช่วยลดคอเลสเตอรอล ข้าวกล้องมีไฟเบอร์สูง",
      imageUrl: "https://i.postimg.cc/C1HNJ0mK/image.png",
      ingredients: [
        "ข้าวกล้องหุงสุก ½ ถ้วย", 
        "เห็ดหอมสด 3 ดอก", 
        "น้ำซุปผัก 1 ถ้วย", 
        "ซีอิ๊วขาวโซเดียมต่ำ ½ ช้อนชา", 
        "ต้นหอมซอย 1 ช้อนโต๊ะ"
      ],
      instructions: [
        "ต้มน้ำซุปให้เดือด ใส่เห็ดหอม",
        "ใส่ข้าวกล้อง ต้มต่อ 5 นาที",
        "ปรุงรส โรยต้นหอม พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "แซนด์วิชอกไก่และอะโวคาโด",
      description: "อกไก่ไขมันต่ำ อะโวคาโดมีไขมันดี ช่วยลดความเสี่ยงโรคหัวใจ",
      imageUrl: "https://i.postimg.cc/0jkCB4B0/image.png",
      ingredients: [
        "ขนมปังโฮลวีต 2 แผ่น", 
        "อกไก่ต้มสไลซ์ 50 กรัม", 
        "อะโวคาโดบด 2 ช้อนโต๊ะ", 
        "มะเขือเทศหั่น 2 ชิ้น"
      ],
      instructions: [
        "ทาอะโวคาโดบดบนขนมปัง",
        "วางอกไก่และมะเขือเทศ ประกบขนมปัง",
        "พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "น้ำเต้าหู้ธัญพืช",
      description: "น้ำเต้าหู้ช่วยลดคอเลสเตอรอล ธัญพืชเพิ่มไฟเบอร์",
      imageUrl: "https://i.postimg.cc/XqsgS8MS/image.png",
      ingredients: [
        "น้ำเต้าหู้ 1 ถ้วย", 
        "เมล็ดเจีย 1 ช้อนชา", 
        "งาดำคั่ว 1 ช้อนชา"
      ],
      instructions: [
        "ผสมเมล็ดเจียลงในน้ำเต้าหู้ พักไว้ 5 นาที",
        "โรยงาดำคั่ว พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ต้มจืดเต้าหู้ไข่และผักใบเขียว",
      description: "เต้าหู้ไข่ให้โปรตีน ผักใบเขียวมีโพแทสเซียมช่วยลดความดัน",
      imageUrl: "https://i.postimg.cc/YqS3NJgp/image.png",
      ingredients: [
        "เต้าหู้ไข่ 1 หลอด หั่นเป็นชิ้น", 
        "ผักโขมหรือผักกวางตุ้ง 1 ถ้วย", 
        "น้ำซุปผัก 1 ถ้วย", 
        "ซีอิ๊วขาวโซเดียมต่ำ ½ ช้อนชา"
      ],
      instructions: [
        "ต้มน้ำซุปให้เดือด ใส่เต้าหู้ไข่และผัก",
        "ปรุงรสด้วยซีอิ๊วขาวโซเดียมต่ำ",
        "ต้มจนผักสุก พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ข้าวกล้องคลุกปลาทูย่าง",
      description: "ปลาทูมีโอเมก้า 3 ดีต่อหัวใจ ข้าวกล้องมีไฟเบอร์ช่วยลดคอเลสเตอรอล",
      imageUrl: "https://i.postimg.cc/4xDQgy0d/image.png",
      ingredients: [
        "ข้าวกล้องหุงสุก ½ ถ้วย", 
        "ปลาทูย่างแกะเนื้อ ½ ตัว", 
        "น้ำมะนาว ½ ช้อนชา", 
        "หอมแดงซอย 1 ช้อนโต๊ะ", 
        "ต้นหอมซอย 1 ช้อนโต๊ะ"
      ],
      instructions: [
        "คลุกข้าวกล้องกับเนื้อปลาทู",
        "ใส่หอมแดง ต้นหอม และน้ำมะนาว คลุกให้เข้ากัน",
        "พร้อมเสิร์ฟ"
      ]
    }
  ],
  lunch : [
    {
      name: "ข้าวกล้องผัดปลาแซลมอน",
      description: "ปลาแซลมอนมีโอเมก้า 3 ดีต่อหัวใจ ข้าวกล้องช่วยควบคุมระดับไขมัน",
      imageUrl: "https://i.postimg.cc/Jh3ZCqJ6/image.png",
      ingredients: [
        "ข้าวกล้องหุงสุก 1 ถ้วย", 
        "ปลาแซลมอนย่างสุก 50 กรัม", 
        "หอมใหญ่ซอย 2 ช้อนโต๊ะ", 
        "แครอทหั่นเต๋า 2 ช้อนโต๊ะ", 
        "ซีอิ๊วขาวโซเดียมต่ำ 1 ช้อนชา", 
        "น้ำมันมะกอก 1 ช้อนชา"
      ],
      instructions: [
        "ตั้งกระทะใส่น้ำมันมะกอก ผัดหอมใหญ่และแครอทให้สุก",
        "ใส่ข้าวกล้องและเนื้อปลาแซลมอนย่างลงไป ผัดให้เข้ากัน",
        "ปรุงรสด้วยซีอิ๊วขาวโซเดียมต่ำ ผัดต่ออีก 1 นาที",
        "ตักใส่จาน พร้อมเสิร์ฟ"
      ],
    },
    {
      name: "ต้มยำไก่ฉีกใส่เห็ด",
      description: "ไก่ให้โปรตีนสูง ไขมันต่ำ เห็ดช่วยลดคอเลสเตอรอล",
      imageUrl: "https://i.postimg.cc/xC0Hfz30/image.png",
      ingredients: [
        "อกไก่ต้มฉีก 50 กรัม", 
        "เห็ดฟาง ½ ถ้วย", 
        "ตะไคร้หั่นท่อน 2 ต้น", 
        "ใบมะกรูดฉีก 3 ใบ", 
        "น้ำมะนาว 1 ช้อนโต๊ะ", 
        "น้ำปลาโซเดียมต่ำ 1 ช้อนชา"
      ],
      instructions: [
        "ต้มน้ำให้เดือด ใส่ตะไคร้ ใบมะกรูด และเห็ดฟาง",
        "ใส่อกไก่ฉีกลงไป ต้มต่อ 3 นาที",
        "ปรุงรสด้วยน้ำปลาและน้ำมะนาว",
        "ตักใส่ชาม พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ยำเต้าหู้ขาวกับผักสด",
      description: "เต้าหู้ขาวให้โปรตีนดี ไขมันต่ำ ผักสดช่วยควบคุมความดัน",
      imageUrl: "https://i.postimg.cc/MTdBvp91/image.png",
      ingredients: [
        "เต้าหู้ขาวหั่นชิ้น ½ ก้อน", 
        "มะเขือเทศหั่น ¼ ถ้วย", 
        "หอมแดงซอย 1 ช้อนโต๊ะ", 
        "ต้นหอมซอย 1 ช้อนโต๊ะ", 
        "น้ำมะนาว 1 ช้อนโต๊ะ", 
        "น้ำปลาโซเดียมต่ำ 1 ช้อนชา"
      ],
      instructions: [
        "นึ่งเต้าหู้ขาวให้สุก พักไว้",
        "ผสมน้ำมะนาวและน้ำปลาเข้าด้วยกัน",
        "ใส่มะเขือเทศ หอมแดง และต้นหอมลงในเต้าหู้ คลุกให้เข้ากัน",
        "พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ข้าวกล้องต้มปลาทูใส่ขิง",
      description: "ปลาทูมีโอเมก้า 3 ขิงช่วยกระตุ้นการไหลเวียนเลือด",
      imageUrl: "https://i.postimg.cc/WzzkrcyC/image.png",
      ingredients: [
        "ข้าวกล้องหุงสุก ½ ถ้วย", 
        "ปลาทูย่างแกะเนื้อ ½ ตัว", 
        "ขิงซอย 1 ช้อนโต๊ะ", 
        "น้ำซุปผัก 1 ถ้วย", 
        "ต้นหอมซอย 1 ช้อนโต๊ะ"
      ],
      instructions: [
        "ต้มน้ำซุปให้เดือด ใส่ข้าวกล้องและขิงซอย",
        "ใส่เนื้อปลาทู ปรุงรสเล็กน้อย",
        "ต้มต่อ 3 นาที โรยต้นหอม พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ผัดคะน้าไก่น้ำมันหอยโซเดียมต่ำ",
      description: "คะน้ามีไฟเบอร์สูง อกไก่ให้โปรตีนดี ไขมันต่ำ",
      imageUrl: "https://i.postimg.cc/WpxGrh27/image.png",
      ingredients: [
        "คะน้าหั่น 1 ถ้วย", 
        "อกไก่หั่นชิ้น 50 กรัม", 
        "น้ำมันหอยโซเดียมต่ำ 1 ช้อนชา", 
        "น้ำมันมะกอก 1 ช้อนชา"
      ],
      instructions: [
        "ตั้งกระทะใส่น้ำมันมะกอก ผัดอกไก่จนสุก",
        "ใส่คะน้าลงไป ผัดให้เข้ากัน",
        "ปรุงรสด้วยน้ำมันหอยโซเดียมต่ำ",
        "ตักใส่จาน พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ข้าวกล้องคลุกปลาทูน่ากับงาดำ",
      description: "ปลาทูน่ามีโอเมก้า 3 ดีต่อหัวใจ งาดำช่วยลดคอเลสเตอรอล",
      imageUrl: "https://i.postimg.cc/8CyWCCKM/image.png",
      ingredients: [
        "ข้าวกล้องหุงสุก 1 ถ้วย", 
        "ปลาทูน่าในน้ำแร่ 50 กรัม", 
        "งาดำคั่ว 1 ช้อนชา", 
        "น้ำมะนาว 1 ช้อนชา", 
        "หอมแดงซอย 1 ช้อนโต๊ะ", 
        "ต้นหอมซอย 1 ช้อนโต๊ะ"
      ],
      instructions: [
        "คลุกข้าวกล้องกับปลาทูน่าให้เข้ากัน",
        "ใส่หอมแดง ต้นหอม น้ำมะนาว และงาดำ คลุกให้เข้ากัน",
        "ตักใส่จาน พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "แกงเลียงกุ้งสด",
      description: "แกงเลียงอุดมด้วยผักที่ช่วยลดความดันและบำรุงหัวใจ",
      imageUrl: "https://i.postimg.cc/mDt91GJq/image.png",
      ingredients: [
        "กุ้งสดปอกเปลือก 5 ตัว", 
        "บวบหั่นชิ้น ½ ถ้วย", 
        "ฟักทองหั่นชิ้น ½ ถ้วย", 
        "ใบแมงลัก ½ ถ้วย", 
        "น้ำซุปผัก 1 ½ ถ้วย", 
        "พริกไทยป่น ½ ช้อนชา"
      ],
      instructions: [
        "ต้มน้ำซุปให้เดือด ใส่ฟักทอง บวบ ต้มจนเกือบสุก",
        "ใส่กุ้งและใบแมงลัก ปรุงรสเล็กน้อย",
        "โรยพริกไทยป่น พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ข้าวกล้องราดผัดผักรวมอกไก่",
      description: "ผักหลากชนิดช่วยควบคุมความดัน อกไก่ให้โปรตีนไขมันต่ำ",
      imageUrl: "https://i.postimg.cc/NFXrbkgk/image.png",
      ingredients: [
        "ข้าวกล้องหุงสุก 1 ถ้วย", 
        "อกไก่หั่นชิ้น 50 กรัม", 
        "แครอทหั่น ¼ ถ้วย", 
        "กะหล่ำปลีหั่น ¼ ถ้วย", 
        "น้ำมันหอยโซเดียมต่ำ 1 ช้อนชา", 
        "น้ำมันมะกอก 1 ช้อนชา"
      ],
      instructions: [
        "ตั้งกระทะใส่น้ำมันมะกอก ผัดอกไก่จนสุก",
        "ใส่ผักทั้งหมดลงไป ผัดให้เข้ากัน",
        "ปรุงรสด้วยน้ำมันหอยโซเดียมต่ำ",
        "ตักราดบนข้าวกล้อง พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ซุปฟักทองนมถั่วเหลือง",
      description: "ฟักทองให้สารต้านอนุมูลอิสระ นมถั่วเหลืองดีต่อหัวใจ",
      imageUrl: "https://i.postimg.cc/QxpTTmYX/image.png",
      ingredients: [
        "ฟักทองหั่นชิ้น ½ ถ้วย", 
        "นมถั่วเหลืองไม่หวาน ½ ถ้วย", 
        "น้ำซุปผัก ½ ถ้วย", 
        "หอมใหญ่สับ 1 ช้อนโต๊ะ", 
        "น้ำมันมะกอก 1 ช้อนชา"
      ],
      instructions: [
        "ตั้งกระทะใส่น้ำมันมะกอก ผัดหอมใหญ่จนหอม",
        "ใส่ฟักทอง เติมน้ำซุป ต้มจนฟักทองนิ่ม",
        "ปั่นฟักทองให้เนียน เติมนมถั่วเหลือง ต้มต่อ 2 นาที",
        "พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "สลัดเต้าหู้ไข่กับน้ำสลัดงา",
      description: "เต้าหู้ไข่ให้โปรตีนดี น้ำสลัดงามีกรดไขมันดีช่วยบำรุงหัวใจ",
      imageUrl: "https://i.postimg.cc/2SGLH6fM/image.png",
      ingredients: [
        "เต้าหู้ไข่หั่นชิ้น 1 หลอด", 
        "ผักสลัดรวม 1 ถ้วย", 
        "แครอทขูด ¼ ถ้วย", 
        "งาขาวคั่ว 1 ช้อนชา", 
        "น้ำมันงา 1 ช้อนชา",
        "ซีอิ๊วขาวโซเดียมต่ำ ½ ช้อนชา",
        "น้ำมะนาว 1 ช้อนชา"
      ],
      instructions: [
        "ผสมงาขาว น้ำมันงา น้ำมะนาว และซีอิ๊วขาวให้เข้ากัน",
        "จัดผักสลัดและเต้าหู้ไข่ใส่จาน",
        "ราดด้วยน้ำสลัดงา พร้อมเสิร์ฟ"
      ]
    }
  ],
  dinner : [
    {
      name: "แกงส้มผักรวมกับปลากะพง",
      description: "แกงส้มใช้สมุนไพรช่วยลดการอักเสบ ผักรวมให้ไฟเบอร์สูง ปลากะพงมีโอเมก้า 3",
      imageUrl: "https://i.postimg.cc/59545rJk/image.png",
      ingredients: [
        "ปลากะพงหั่นชิ้น 100 กรัม", 
        "กะหล่ำปลีหั่น ½ ถ้วย", 
        "แครอทหั่น ¼ ถ้วย", 
        "น้ำพริกแกงส้ม 1 ช้อนโต๊ะ", 
        "น้ำมะขามเปียก 1 ช้อนโต๊ะ", 
        "น้ำปลาโซเดียมต่ำ 1 ช้อนชา"
      ],
      instructions: [
        "ต้มน้ำให้เดือด ใส่น้ำพริกแกงส้ม คนให้ละลาย",
        "ใส่ผักทั้งหมดลงไป ต้มให้สุก",
        "ใส่ปลากะพง ต้มต่อ 5 นาที",
        "ปรุงรสด้วยน้ำมะขามเปียกและน้ำปลาโซเดียมต่ำ พร้อมเสิร์ฟ"
      ],
    },
    {
      name: "ปลานึ่งซีอิ๊วโซเดียมต่ำ",
      description: "ปลามีโปรตีนดี ไขมันต่ำ ซีอิ๊วโซเดียมต่ำช่วยควบคุมความดัน",
      imageUrl: "https://i.postimg.cc/RZY4V51q/image.png",
      ingredients: [
        "ปลาเก๋าหรือปลากะพง 100 กรัม", 
        "ขิงซอย 1 ช้อนโต๊ะ", 
        "ต้นหอมซอย 1 ช้อนโต๊ะ", 
        "ซีอิ๊วขาวโซเดียมต่ำ 1 ช้อนชา", 
        "น้ำมันงา ½ ช้อนชา"
      ],
      instructions: [
        "วางขิงซอยบนปลานึ่ง 10 นาทีจนสุก",
        "ราดซีอิ๊วขาวและน้ำมันงา โรยต้นหอม",
        "พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ผัดผักบุ้งน้ำมันหอยโซเดียมต่ำ",
      description: "ผักบุ้งช่วยลดความดัน น้ำมันหอยโซเดียมต่ำช่วยให้รสชาติกลมกล่อม",
      imageUrl: "https://i.postimg.cc/GhhCFhqH/image.png",
      ingredients: [
        "ผักบุ้งหั่น 1 ถ้วย", 
        "กระเทียมสับ 1 ช้อนชา", 
        "น้ำมันหอยโซเดียมต่ำ 1 ช้อนชา", 
        "น้ำมันมะกอก 1 ช้อนชา"
      ],
      instructions: [
        "ตั้งกระทะใส่น้ำมันมะกอก ผัดกระเทียมจนหอม",
        "ใส่ผักบุ้งลงไป ผัดเร็วๆ",
        "ปรุงรสด้วยน้ำมันหอยโซเดียมต่ำ ผัดต่ออีก 1 นาที",
        "พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ต้มจับฉ่ายสูตรลดโซเดียม",
      description: "ผักหลายชนิดให้วิตามินสูง ช่วยบำรุงหัวใจ",
      imageUrl: "https://i.postimg.cc/m26073P5/image.png",
      ingredients: [
        "กะหล่ำปลีหั่น ½ ถ้วย", 
        "หัวไชเท้าหั่น ¼ ถ้วย", 
        "แครอทหั่น ¼ ถ้วย", 
        "เห็ดหอม 3 ดอก", 
        "น้ำซุปผัก 2 ถ้วย", 
        "ซีอิ๊วขาวโซเดียมต่ำ 1 ช้อนชา"
      ],
      instructions: [
        "ต้มน้ำซุปให้เดือด ใส่ผักทั้งหมดลงไป",
        "ต้มจนผักนิ่ม ปรุงรสด้วยซีอิ๊วขาวโซเดียมต่ำ",
        "ตักใส่ชาม พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "สลัดอกไก่กับน้ำสลัดโยเกิร์ต",
      description: "อกไก่ให้โปรตีนดี ไขมันต่ำ น้ำสลัดโยเกิร์ตดีต่อระบบย่อย",
      imageUrl: "https://i.postimg.cc/zGb47LWX/image.png",
      ingredients: [
        "อกไก่ต้มฉีก 50 กรัม", 
        "ผักสลัดรวม 1 ถ้วย", 
        "แครอทขูด ¼ ถ้วย", 
        "โยเกิร์ตรสธรรมชาติ 2 ช้อนโต๊ะ", 
        "น้ำมะนาว 1 ช้อนชา"
      ],
      instructions: [
        "ผสมโยเกิร์ตกับน้ำมะนาวให้เข้ากัน",
        "จัดสลัดใส่จาน วางอกไก่",
        "ราดน้ำสลัดโยเกิร์ต พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "แกงจืดเต้าหู้ไข่กับสาหร่าย",
      description: "เต้าหู้ไข่ให้โปรตีนดี สาหร่ายมีไอโอดีนช่วยลดความดัน",
      imageUrl: "https://i.postimg.cc/jSpmFsQ6/image.png",
      ingredients: [
        "เต้าหู้ไข่หั่นชิ้น 1 หลอด", 
        "สาหร่ายทะเลแห้ง 1/2 ถ้วย", 
        "แครอทหั่น ¼ ถ้วย", 
        "น้ำซุปผัก 2 ถ้วย", 
        "ซีอิ๊วขาวโซเดียมต่ำ 1 ช้อนชา"
      ],
      instructions: [
        "ต้มน้ำซุปให้เดือด ใส่แครอท ต้มจนเริ่มนิ่ม",
        "ใส่เต้าหู้ไข่และสาหร่าย ปรุงรสด้วยซีอิ๊วขาว",
        "ตักใส่ชาม พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ปลากะพงอบสมุนไพร",
      description: "ปลาไขมันต่ำ สมุนไพรช่วยลดไขมันในเลือด",
      imageUrl: "https://i.postimg.cc/JnmgRPFG/image.png",
      ingredients: [
        "ปลากะพง 1 ตัวเล็ก", 
        "ขิงซอย 1 ช้อนโต๊ะ", 
        "ตะไคร้หั่นท่อน 2 ต้น", 
        "ใบมะกรูด 3 ใบ", 
        "น้ำมันมะกอก 1 ช้อนชา"
      ],
      instructions: [
        "วางขิง ตะไคร้ และใบมะกรูดบนตัวปลา",
        "ราดน้ำมันมะกอก ห่อฟอยล์ อบ 180°C 15 นาที",
        "นำออกจากเตา พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ผัดฟักทองใส่ไข่",
      description: "ฟักทองช่วยต้านอนุมูลอิสระ ไข่ให้โปรตีนสูง",
      imageUrl: "https://i.postimg.cc/RV8DWM8r/image.png",
      ingredients: [
        "ฟักทองหั่นชิ้น ½ ถ้วย", 
        "ไข่ไก่ 1 ฟอง", 
        "กระเทียมสับ 1 ช้อนชา", 
        "น้ำมันมะกอก 1 ช้อนชา"
      ],
      instructions: [
        "ตั้งกระทะใส่น้ำมัน ผัดกระเทียมให้หอม",
        "ใส่ฟักทอง ผัดจนเริ่มสุก",
        "ตอกไข่ลงไป คนให้เข้ากัน ผัดต่อจนไข่สุก",
        "พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ข้าวกล้องผัดอกไก่กับบล็อคโคลี",
      description: "ข้าวกล้องให้ไฟเบอร์ อกไก่ช่วยสร้างกล้ามเนื้อ บรอกโคลีดีต่อหัวใจ",
      imageUrl: "https://i.postimg.cc/Bvf7Cm4M/image.png",
      ingredients: [
        "ข้าวกล้องหุงสุก 1 ถ้วย", 
        "อกไก่หั่นชิ้น 50 กรัม", 
        "บรอกโคลีหั่น ½ ถ้วย", 
        "น้ำมันหอยโซเดียมต่ำ 1 ช้อนชา", 
        "น้ำมันมะกอก 1 ช้อนชา"
      ],
      instructions: [
        "ตั้งกระทะใส่น้ำมัน ผัดอกไก่จนเริ่มสุก",
        "ใส่บรอกโคลี ผัดให้เข้ากัน",
        "ใส่ข้าวกล้อง ปรุงรสด้วยน้ำมันหอย",
        "พร้อมเสิร์ฟ"
      ]
    },
    {
      name: "ยำเห็ดรวม",
      description: "เห็ดมีไฟเบอร์และโปรตีน น้ำยำไม่มีไขมันดีต่อสุขภาพ",
      imageUrl: "https://i.postimg.cc/xdGxpLdY/image.png",
      ingredients: [
        "เห็ดฟาง ½ ถ้วย", 
        "เห็ดเข็มทอง ½ ถ้วย", 
        "หอมแดงซอย 1 ช้อนโต๊ะ", 
        "น้ำมะนาว 1 ช้อนชา", 
        "ซีอิ๊วขาวโซเดียมต่ำ ½ ช้อนชา"
      ],
      instructions: [
        "ลวกเห็ดทั้งหมดให้สุก พักให้สะเด็ดน้ำ",
        "ผสมหอมแดง น้ำมะนาว และซีอิ๊วขาวให้เข้ากัน",
        "คลุกเห็ดกับน้ำยำ พร้อมเสิร์ฟ"
      ]
    }
  ]
};

// สร้างข้อมูลโภชนาการอัตโนมัติ (กรณีเมนูยังไม่มีระบุไว้)
function generateNutritionalInfo(menu, mealType) {
  const name = (menu && menu.name) ? menu.name : "";
  const text = [
    name,
    ...(Array.isArray(menu?.ingredients) ? menu.ingredients : [])
  ].join(" ");

  // ค่าเริ่มต้นตามมื้ออาหาร
  let calories = mealType === "breakfast" ? 240 : mealType === "lunch" ? 300 : 220;
  let protein = mealType === "breakfast" ? 12 : mealType === "lunch" ? 22 : 18;
  let fat = mealType === "breakfast" ? 6 : mealType === "lunch" ? 7 : 5;
  let carbs = mealType === "breakfast" ? 30 : mealType === "lunch" ? 38 : 22;
  let fiber = mealType === "breakfast" ? 3 : mealType === "lunch" ? 5 : 3;

  const set = (c, p, f, ch, fi) => { calories = c; protein = p; fat = f; carbs = ch; fiber = fi; };

  // ปรับตามประเภทเมนูอย่างคร่าว ๆ
  if (text.includes("โจ๊ก") || text.includes("ข้าวต้ม") || text.includes("ซุป")) {
    set(mealType === "breakfast" ? 220 : 230, 18, 3, 28, 2);
  } else if (text.includes("สลัด")) {
    set(230, name.includes("ไก่") || name.includes("ทูน่า") ? 24 : 14, 6, 14, 5);
  } else if (text.includes("ต้มยำ") || text.includes("แกงส้ม") || text.includes("แกงจืด")) {
    set(180, 22, 3, 20, 4);
  } else if (text.includes("ปลานึ่ง") || text.includes("อบ") || (text.includes("ปลา") && !text.includes("ทอด"))) {
    set(220, 26, 5, 6, 1);
  } else if (text.includes("ลาบ")) {
    set(220, 24, 7, 8, 2);
  } else if (text.includes("ก๋วยเตี๋ยวลุยสวน")) {
    set(210, 24, 3, 20, 4);
  } else if (text.includes("ผัดไทย") || text.includes("ข้าวผัด") || text.includes("ผัด")) {
    set(300, 22, 7, 40, 4);
  } else if (text.includes("แพนเค้ก") || text.includes("ขนมปัง")) {
    set(260, 10, 7, 42, 4);
  } else if (text.includes("สมูทตี้") || text.includes("น้ำเต้าหู้")) {
    set(190, 9, 6, 24, 3);
  }

  return {
    calories: `พลังงาน: ${calories} กิโลแคลอรี`,
    protein: `โปรตีน: ${protein} กรัม`,
    fat: `ไขมันทั้งหมด: ${fat} กรัม`,
    carbs: `คาร์โบไฮเดรต: ${carbs} กรัม`,
    fiber: `ใยอาหาร: ${fiber} กรัม`
  };
}

// เพิ่มฟังก์ชันสำหรับเพิ่มเมนูอาหารสำหรับผู้ป่วยโรคหัวใจ
async function addHeartDiseaseMenus() {
  const batch = db.batch();
  let menuCount = 0;
  
  // เพิ่มเมนูอาหารเช้า
  for (const menu of heartDiseaseMenus.breakfast) {
    const menuRef = db.collection('foodMenus').doc();
    batch.set(menuRef, {
      ...menu,
      mealType: "breakfast",
      suitableFor: {
        healthy: false,
        diabetes: false,
        highBloodPressure: false,
        heartDisease: true
      },
      nutritionalInfo: menu.nutritionalInfo ? menu.nutritionalInfo : generateNutritionalInfo(menu, "breakfast"),
      createdAt: admin.firestore.FieldValue.serverTimestamp(),
      updatedAt: admin.firestore.FieldValue.serverTimestamp()
    });
    menuCount++;
  }
  
  // เพิ่มเมนูอาหารกลางวัน
  for (const menu of heartDiseaseMenus.lunch) {
    const menuRef = db.collection('foodMenus').doc();
    batch.set(menuRef, {
      ...menu,
      mealType: "lunch",
      suitableFor: {
        healthy: false,
        diabetes: false,
        highBloodPressure: false,
        heartDisease: true
      },
      nutritionalInfo: menu.nutritionalInfo ? menu.nutritionalInfo : generateNutritionalInfo(menu, "lunch"),
      createdAt: admin.firestore.FieldValue.serverTimestamp(),
      updatedAt: admin.firestore.FieldValue.serverTimestamp()
    });
    menuCount++;
  }
  
  // เพิ่มเมนูอาหารเย็น
  for (const menu of heartDiseaseMenus.dinner) {
    const menuRef = db.collection('foodMenus').doc();
    batch.set(menuRef, {
      ...menu,
      mealType: "dinner",
      suitableFor: {
        healthy: false,
        diabetes: false,
        highBloodPressure: false,
        heartDisease: true
      },
      nutritionalInfo: menu.nutritionalInfo ? menu.nutritionalInfo : generateNutritionalInfo(menu, "dinner"),
      createdAt: admin.firestore.FieldValue.serverTimestamp(),
      updatedAt: admin.firestore.FieldValue.serverTimestamp()
    });
    menuCount++;
  }
  
  // ทำการบันทึกข้อมูลทั้งหมด
  await batch.commit();
  console.log(`เพิ่มเมนูอาหารสำหรับผู้ป่วยโรคหัวใจสำเร็จ จำนวน ${menuCount} เมนู`);
}

// เรียกใช้ฟังก์ชัน
addHeartDiseaseMenus()
  .then(() => {
    console.log('เสร็จสิ้นการนำเข้าเมนูอาหารสำหรับผู้ป่วยโรคหัวใจ');
    process.exit(0);
  })
  .catch(error => {
    console.error('เกิดข้อผิดพลาด:', error);
    process.exit(1);
  });